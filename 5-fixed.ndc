let input = read_file("input/2024/5.txt");
let rules_txt, things = input.paragraphs;

let rules = %{:0};

for a, b in rules_txt.lines.map(nums) {
	rules[a, b] = -1;
	rules[b, a] = 1;
}

let p1, p2 = 0, 0;

for line in things.lines {	
	let ns = line.nums();
	let nss = ns.sorted_by(fn(a, b) => rules[a, b]);

	if ns == nss {
		p1 += ns.get((ns.len / 2).floor.int);
	} else {
		p2 += nss.get((nss.len / 2).floor.int);
	}
}

p1.print;
p2.print;